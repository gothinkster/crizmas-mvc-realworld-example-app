(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{25:function(t,e,n){"use strict";n.d(e,"f",(function(){return s})),n.d(e,"h",(function(){return l})),n.d(e,"i",(function(){return c})),n.d(e,"g",(function(){return m})),n.d(e,"e",(function(){return u})),n.d(e,"c",(function(){return d})),n.d(e,"k",(function(){return f})),n.d(e,"m",(function(){return g})),n.d(e,"l",(function(){return p})),n.d(e,"d",(function(){return b})),n.d(e,"a",(function(){return h})),n.d(e,"j",(function(){return v})),n.d(e,"b",(function(){return y}));var r=n(5),a=n(6);const i=t=>{t.createdAt=new Date(t.createdAt),t.updatedAt=new Date(t.updatedAt)},o=t=>(t.articles.forEach(i),t),s=({offset:t,limit:e})=>Object(r.b)("articles",{offset:t,limit:e}).then(a.b).then(o),l=({offset:t,limit:e})=>Object(r.b)("articles/feed",{offset:t,limit:e}).then(a.b).then(o),c=({tag:t,offset:e,limit:n})=>Object(r.b)("articles",{tag:t,offset:e,limit:n}).then(a.b).then(o),m=({author:t,limit:e,offset:n})=>Object(r.b)("articles",{author:t,offset:n,limit:e}).then(a.b).then(o),u=({favorited:t,limit:e,offset:n})=>Object(r.b)("articles",{favorited:t,offset:n,limit:e}).then(a.b).then(o),d=({slug:t})=>Object(r.b)("articles/"+encodeURIComponent(t)).then(a.b).then(({article:t})=>(i(t),{article:t})),f=({title:t,description:e,body:n,tagList:i})=>Object(r.c)("articles",{article:{title:t,description:e,body:n,tagList:i}}).then(a.b,a.a),g=({slug:t,title:e,description:n,body:i,tagList:o})=>Object(r.d)("articles/"+encodeURIComponent(t),{article:{title:e,description:n,body:i,tagList:o}}).then(a.b,a.a),p=({slug:t,isFavorite:e})=>(e?r.c:r.a)(`articles/${t}/favorite`).then(a.b),b=({slug:t})=>Object(r.b)(`articles/${encodeURIComponent(t)}/comments`).then(a.b).then(({comments:t})=>(t.forEach(i),{comments:t})),h=({slug:t})=>Object(r.a)("articles/"+encodeURIComponent(t)),v=({slug:t,comment:e})=>Object(r.c)(`articles/${encodeURIComponent(t)}/comments`,{comment:{body:e}}).then(a.b).then(({comment:t})=>(i(t),{comment:t})),y=({slug:t,commentId:e})=>Object(r.a)(`articles/${encodeURIComponent(t)}/comments/${e}`)},26:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(2);function a(t){const e={title:t.title,author:new r.a(t.author),description:t.description,body:t.body,slug:t.slug,createdAt:t.createdAt,updatedAt:t.updatedAt,favorited:t.favorited,favoritesCount:t.favoritesCount,tagList:t.tagList,comments:null,setFavorite:({favorited:t,favoritesCount:n})=>{e.favorited=t,e.favoritesCount=n},setComments:t=>{e.comments=t},addComment:t=>{e.comments.unshift(t)},deleteComment:t=>{const n=e.comments.findIndex(e=>e.id===t);-1!==n&&e.comments.splice(n,1)}};return e}},52:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return c}));var r=n(0),a=n.n(r),i=n(3),o=n.n(i),s=n(57);function l(){return(l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}class c extends r.Component{constructor(){super(),this.onSubmit=t=>{t.preventDefault(),this.props.controller.form.submit()},this.onTagStringKeyPress=t=>{"Enter"===t.key&&(t.preventDefault(),this.props.controller.form.get("tagString").submit())}}render(){const{form:t,serverErrors:e,isPending:n,removeTag:r}=this.props.controller,i=t.get("tagList").getValue();return a.a.createElement("div",{className:"editor-page"},a.a.createElement("div",{className:"container page"},a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col-md-10 offset-md-1 col-xs-12"},e&&a.a.createElement("ul",{className:"error-messages"},e.map((t,e)=>a.a.createElement("li",{key:e},t))),a.a.createElement("form",{onSubmit:this.onSubmit},a.a.createElement("fieldset",null,a.a.createElement("fieldset",{className:"form-group"},a.a.createElement(s.a,l({type:"text",inputClassName:"form-control form-control-lg",placeholder:"Article Title",disabled:n},t.get("title")))),a.a.createElement("fieldset",{className:"form-group"},a.a.createElement(s.a,l({type:"text",inputClassName:"form-control",placeholder:"What's this article about?",disabled:n},t.get("description")))),a.a.createElement("fieldset",{className:"form-group"},a.a.createElement(s.a,l({type:"textarea",inputClassName:"form-control",placeholder:"Write your article (in markdown)",inputProps:{rows:"8"},disabled:n},t.get("body")))),a.a.createElement("fieldset",{className:"form-group"},a.a.createElement(s.a,l({type:"text",inputClassName:"form-control",placeholder:"Enter tags",disabled:n},t.get("tagString"),{inputProps:{onKeyPress:this.onTagStringKeyPress}})),!!i.length&&a.a.createElement("div",{className:"tag-list"},i.map((t,e)=>a.a.createElement("span",{key:e,className:"tag-default tag-pill"},a.a.createElement("i",{className:"ion-close-round",onClick:r.bind(null,e)}),t)))),a.a.createElement("button",{className:"btn btn-lg pull-xs-right btn-primary",disabled:n},"Publish Article")))))))}}c.propTypes={controller:o.a.object.isRequired}},53:function(t,e,n){"use strict";n.r(e);var r=n(22),a=n(43),i=n(14),o=n(10),s=n(2),l=n(26),c=n(25);e.default=Object(r.a)((function(){const t={isNew:!1,form:null,serverErrors:null,article:null,onEnter:({routeFragment:n})=>s.b.isAuthenticated?(t.isNew=!n.abstractPath,t.isNew?void e():t.getArticle(o.a.params.get("slug")).then(e,()=>(o.a.transitionTo("/"),!1))):(o.a.transitionTo("/login"),!1)},e=()=>{t.form=new a.a({children:[{name:"title",initialValue:t.article&&t.article.title,validate:Object(i.a)()},{name:"description",initialValue:t.article&&t.article.description},{name:"body",initialValue:t.article&&t.article.body,validate:Object(i.a)()},{name:"tagString",actions:{submit:t.updateTagList}},{name:"tagList",initialValue:t.article&&t.article.tagList||[]}],actions:{submit:()=>{const e=t.form.getResult();t.saveArticle({title:e.title,description:e.description,body:e.body,tagList:e.tagList})}},onFormChange:()=>{t.serverErrors=null}})};return t.getArticle=e=>c.c({slug:e}).then(({article:e})=>{t.article=new l.a(e)}),t.saveArticle=({title:e,description:n,body:r,tagList:a})=>{t.serverErrors=null;return(t.isNew?c.k({title:e,description:n,body:r,tagList:a}):c.m({slug:t.article.slug,title:e,description:n,body:r,tagList:a})).then(({article:{slug:t}})=>{o.a.transitionTo("/article/"+t)},e=>{t.serverErrors=e})},t.updateTagList=()=>{const e=t.form.get("tagList"),n=e.getValue(),r=t.form.get("tagString"),a=r.getResult(),i=a&&a.split(",").map(t=>t.trim()).filter(t=>t&&!n.includes(t));r.clear(),i&&i.length&&e.onChange(n.concat(i))},t.removeTag=e=>{t.form.get("tagList").getValue().splice(e,1)},t}))}}]);
//# sourceMappingURL=editor.bundle-185ebfd46c6b5de77702.js.map